[
  {
    "id": "template_single_year_npv",
    "name": "NPV: Single cash flow in year 1",
    "short_description": "Calculates the Net Present Value for an initial investment, given a single expected cash flow in the first year and a discount rate.",
    "domain": "Investment Analysis",
    "topic": "Net Present Value",
    "inputs": [
      {
        "name": "x",
        "type": "float",
        "description": "Initial investment amount."
      },
      {
        "name": "C",
        "type": "float",
        "description": "Cash flow expected at the end of year 1."
      },
      {
        "name": "r",
        "type": "float",
        "description": "Discount rate as a decimal (e.g., 0.05 for 5%)."
      }
    ],
    "output_var": "NPV",
    "sympy_formulas": [
      {
        "variable": "PV",
        "formula": "C / (1 + r)"
      },
      {
        "variable": "NPV",
        "formula": "PV - x"
      }
    ],
    "tags": [
      "npv",
      "single-period",
      "financial-template"
    ]
  },
  {
    "id": "template_two_year_npv",
    "name": "NPV: two cash flows (years 1 & 2)",
    "short_description": "Calculates Net Present Value for an initial investment with cash inflows in year 1 and year 2, using a common discount rate.",
    "domain": "Investment Analysis",
    "topic": "Npv",
    "inputs": [
      {
        "name": "x",
        "type": "float",
        "description": "initial investment"
      },
      {
        "name": "C1",
        "type": "float",
        "description": "cash flow at year 1"
      },
      {
        "name": "C2",
        "type": "float",
        "description": "cash flow at year 2"
      },
      {
        "name": "r",
        "type": "float",
        "description": "discount rate as percentage"
      }
    ],
    "output_var": "NPV",
    "sympy_formulas": [
      {
        "variable": "PV_total",
        "formula": "C1/(1+r/100) + C2/((1+r/100)**2)"
      },
      {
        "variable": "NPV",
        "formula": "PV_total - x"
      }
    ],
    "tags": [
      "npv",
      "financial-template",
      "multi-period",
      "two-year"
    ]
  },
  {
    "id": "template_three_year_with_salvage_npv",
    "name": "NPV: Two Annual Inflows + Salvage in Year 3",
    "short_description": "Calculates Net Present Value (NPV) for an investment with an initial outlay, two annual cash inflows (Year 1 and Year 2), and a salvage value at the end of the third year.",
    "domain": "Investment Analysis",
    "topic": "Net Present Value",
    "inputs": [
      {
        "name": "x",
        "type": "float",
        "description": "Initial investment amount"
      },
      {
        "name": "C1",
        "type": "float",
        "description": "Cash flow at the end of year 1"
      },
      {
        "name": "C2",
        "type": "float",
        "description": "Cash flow at the end of year 2"
      },
      {
        "name": "salvage",
        "type": "float",
        "description": "Salvage value at the end of year 3"
      },
      {
        "name": "r",
        "type": "float",
        "description": "Discount rate as a decimal (e.g., 0.08 for 8%)"
      }
    ],
    "output_var": "NPV",
    "sympy_formulas": [
      {
        "variable": "PV_op",
        "formula": "C1/(1+r) + C2/(1+r)**2"
      },
      {
        "variable": "PV_salvage",
        "formula": "salvage/(1+r)**3"
      },
      {
        "variable": "NPV",
        "formula": "PV_op + PV_salvage - x"
      }
    ],
    "tags": [
      "npv",
      "multi-period",
      "salvage",
      "financial-template"
    ]
  },
  {
    "id": "template_annuity_plus_salvage_npv",
    "name": "NPV: Annuity of Savings plus Salvage",
    "short_description": "Calculates Net Present Value for an initial investment that generates an annuity of savings for 'n' years, plus a salvage value at the end of year 'n', discounted at rate 'r'.",
    "domain": "Investment Analysis",
    "topic": "Net Present Value",
    "inputs": [
      {
        "name": "x",
        "type": "float",
        "description": "Initial investment amount."
      },
      {
        "name": "annual_save",
        "type": "float",
        "description": "Annual savings generated by the investment."
      },
      {
        "name": "salvage",
        "type": "float",
        "description": "Salvage value received at the end of year 'n'."
      },
      {
        "name": "r",
        "type": "float",
        "description": "Discount rate as a decimal (e.g., 0.05 for 5%)."
      },
      {
        "name": "n",
        "type": "integer",
        "description": "Number of years the annuity is received and when the salvage value is realized."
      }
    ],
    "output_var": "NPV",
    "sympy_formulas": [
      {
        "variable": "annuity_factor",
        "formula": "(1 - 1/(1+r)**n)/r"
      },
      {
        "variable": "PV_annuity",
        "formula": "annual_save * annuity_factor"
      },
      {
        "variable": "PV_salvage",
        "formula": "salvage / (1+r)**n"
      },
      {
        "variable": "NPV",
        "formula": "PV_annuity + PV_salvage - x"
      }
    ],
    "tags": [
      "npv",
      "annuity",
      "salvage",
      "financial-template"
    ]
  },
  {
    "id": "template_annuity_salvage_cleanup_npv",
    "name": "NPV: Annuity, Salvage, and Cleanup Cost over N years",
    "short_description": "Calculates Net Present Value for a project with an initial investment, annual savings (annuity) for 'n' years, a salvage value at the end, and a cleanup cost also at the end of 'n' years, all discounted at a rate 'r'.",
    "domain": "Investment Analysis",
    "topic": "Net Present Value",
    "inputs": [
      {
        "name": "x",
        "type": "float",
        "description": "Initial investment cost"
      },
      {
        "name": "annual_save",
        "type": "float",
        "description": "Annual savings generated by the project (annuity cash flow)"
      },
      {
        "name": "salvage",
        "type": "float",
        "description": "Salvage value received at the end of the project (year n)"
      },
      {
        "name": "cleanup",
        "type": "float",
        "description": "Environmental cleanup cost incurred at the end of the project (year n)"
      },
      {
        "name": "r",
        "type": "float",
        "description": "Discount rate as a decimal (e.g., 0.05 for 5%)"
      },
      {
        "name": "n",
        "type": "integer",
        "description": "Number of years for which the project operates and savings accrue"
      }
    ],
    "output_var": "NPV",
    "sympy_formulas": [
      {
        "variable": "pv_factor",
        "formula": "(1 - 1/(1+r)**n) / r"
      },
      {
        "variable": "PV_annuity",
        "formula": "annual_save * pv_factor"
      },
      {
        "variable": "PV_salvage",
        "formula": "salvage / (1+r)**n"
      },
      {
        "variable": "PV_cleanup",
        "formula": "cleanup / (1+r)**n"
      },
      {
        "variable": "NPV",
        "formula": "PV_annuity + PV_salvage - PV_cleanup - x"
      }
    ],
    "tags": [
      "npv",
      "financial-template",
      "annuity",
      "salvage",
      "cleanup",
      "multi-period"
    ]
  }
]